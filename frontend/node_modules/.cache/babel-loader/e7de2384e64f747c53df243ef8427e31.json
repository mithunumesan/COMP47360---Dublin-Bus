{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/michael/Documents/GitHub/COMP47360---Dublin-Bus/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/michael/Documents/GitHub/COMP47360---Dublin-Bus/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/michael/Documents/GitHub/COMP47360---Dublin-Bus/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import WeatherCard from'../components/layout/WeatherCard';import{useJsApiLoader,Autocomplete,DirectionsRenderer,GoogleMap,Marker}from'@react-google-maps/api';import{useState,useRef,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var containerStyle={width:'100%',height:'100%'};var center={lat:53.3463,lng:-6.2631};//   let markers2;\n//   async function exampleFetch() {\n//       const response = await fetch('http://localhost:8000/api/Stops/');\n//       const markers = await response.json();\n//       console.log(markers);\n//   }\n//   exampleFetch();\nfunction JourneyPlanning(){// const [markers,setmarkers]=useState([]);\n// useEffect(() => {\n//     fetch(\"http://localhost:8000/api/Stops/\")\n//     .then(response => response.json())\n//         // 4. Setting *dogImage* to the image url that we received from the response above\n//     .then(data => setmarkers(data.message))\n//   },[])\n//   const getData=()=>{\n//     fetch('http://localhost:8000/api/Stops/'\n//     ,{\n//       headers : { \n//         'Content-Type': 'http://localhost:8000/api/Stops/',\n//         'Accept': 'http://localhost:8000/api/Stops/'\n//        }\n//     }\n//     )\n//       .then(function(response){\n//         console.log(response)\n//         return response.json();\n//       })\n//       .then(function(myJson) {\n//         console.log(myJson);\n//         setData(myJson)\n//       });\n//   }\n//   useEffect(()=>{\n//     getData()\n//   },[])\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),directionsResponse=_useState2[0],setDirectionsResponse=_useState2[1];/**@type React.MutableRefObject<HTMLInputElement> */var startRef=useRef();/**@type React.MutableRefObject<HTMLInputElement> */var destinationRef=useRef();var _useState3=useState(/** @type google.maps.Map */null),_useState4=_slicedToArray(_useState3,2),map=_useState4[0],setMap=_useState4[1];var _useJsApiLoader=useJsApiLoader({googleMapsApiKey:\"AIzaSyCdf-x6SluXsWzP9qpwxVGBY08pm_3TAQU\",libraries:['places']}),isLoaded=_useJsApiLoader.isLoaded;if(!isLoaded){return\"map is not loaded\";}function caculateRoute(){return _caculateRoute.apply(this,arguments);}function _caculateRoute(){_caculateRoute=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var directionsService,results;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(startRef.current.value===''||destinationRef.current.value==='')){_context.next=2;break;}return _context.abrupt(\"return\");case 2:// eslint-disable-next-line\ndirectionsService=new google.maps.DirectionsService();// eslint-disable-next-line\n_context.next=5;return directionsService.route({origin:startRef.current.value,destination:destinationRef.current.value,// eslint-disable-next-line\ntravelMode:google.maps.TravelMode.TRANSIT});case 5:results=_context.sent;setDirectionsResponse(results);console.log(results);case 8:case\"end\":return _context.stop();}}},_callee);}));return _caculateRoute.apply(this,arguments);}function clearRoute(){if(startRef.current.value===''||destinationRef.current.value===''){setDirectionsResponse(null);}}var markers=[// Just an example this should probably be in your state or props. \n{name:\"marker1\",position:{lat:53.17655,lng:-6.138564}},{name:\"marker2\",position:{lat:53.16659,lng:-6.113569}},{name:\"marker3\",position:{lat:49.15659,lng:-123.143569}}];return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"weather-card\",children:/*#__PURE__*/_jsx(WeatherCard,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"box1\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Journey Planner\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"journey-form\",children:[/*#__PURE__*/_jsx(Autocomplete,{children:/*#__PURE__*/_jsx(\"input\",{type:\"search\",placeholder:\"Start Point\",className:\"box\",ref:startRef})}),/*#__PURE__*/_jsx(Autocomplete,{children:/*#__PURE__*/_jsx(\"input\",{type:\"search\",placeholder:\"Destination\",className:\"box\",ref:destinationRef})}),/*#__PURE__*/_jsx(\"label\",{for:\"time\",children:\"Choose a time to start the journey: \"}),/*#__PURE__*/_jsxs(\"select\",{id:\"option\",onChange:function onChange(){var option=document.getElementById(\"option\").value;if(option!==\"now\"){document.getElementById(\"time\").innerHTML='<input type=\"date\" name=\"\" class=\"date\">'+'<input type=\"time\" name=\"\" class=\"time\">';}else{document.getElementById(\"time\").innerHTML=\"\";}},children:[/*#__PURE__*/_jsx(\"option\",{value:\"now\",children:\"Leave Now\"}),/*#__PURE__*/_jsx(\"option\",{value:\"depart\",children:\"Depart At\"}),/*#__PURE__*/_jsx(\"option\",{value:\"arrive\",children:\"Arrive By\"}),/*#__PURE__*/_jsx(\"option\",{value:\"lastAvaliable\",children:\"Last Avaliable\"})]}),/*#__PURE__*/_jsx(\"div\",{id:\"time\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn\",onClick:caculateRoute,children:\"Search\"})]}),/*#__PURE__*/_jsx(\"div\",{id:\"result\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"box2\",children:/*#__PURE__*/_jsx(\"div\",{id:\"map\",children:/*#__PURE__*/_jsxs(GoogleMap,{mapContainerStyle:containerStyle,center:center,zoom:13,onLoad:function onLoad(map){return setMap(map);},children:[markers.map(function(markers,index){return/*#__PURE__*/_jsx(Marker,{name:markers.name,position:{lat:markers.latitude,lng:markers.longitude}},index);}),directionsResponse&&/*#__PURE__*/_jsx(DirectionsRenderer,{directions:directionsResponse})]})})})]})]});}export default JourneyPlanning;","map":{"version":3,"names":["WeatherCard","useJsApiLoader","Autocomplete","DirectionsRenderer","GoogleMap","Marker","useState","useRef","useEffect","containerStyle","width","height","center","lat","lng","JourneyPlanning","directionsResponse","setDirectionsResponse","startRef","destinationRef","map","setMap","googleMapsApiKey","libraries","isLoaded","caculateRoute","current","value","directionsService","google","maps","DirectionsService","route","origin","destination","travelMode","TravelMode","TRANSIT","results","console","log","clearRoute","markers","name","position","option","document","getElementById","innerHTML","index","latitude","longitude"],"sources":["C:/Users/michael/Documents/GitHub/COMP47360---Dublin-Bus/frontend/src/pages/Journeyplanning.js"],"sourcesContent":["import WeatherCard from '../components/layout/WeatherCard';\r\n\r\nimport { useJsApiLoader, Autocomplete,DirectionsRenderer,GoogleMap,Marker } from '@react-google-maps/api';\r\nimport { useState,useRef,useEffect } from 'react';\r\n\r\n\r\nconst containerStyle = {\r\n    width: '100%',\r\n    height: '100%'\r\n  };\r\n  \r\n\r\nconst center = {\r\n    lat: 53.3463,\r\n    lng: -6.2631\r\n  };\r\n    \r\n\r\n//   let markers2;\r\n\r\n//   async function exampleFetch() {\r\n//       const response = await fetch('http://localhost:8000/api/Stops/');\r\n//       const markers = await response.json();\r\n//       console.log(markers);\r\n\r\n      \r\n//   }\r\n  \r\n//   exampleFetch();\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction JourneyPlanning() {\r\n    // const [markers,setmarkers]=useState([]);\r\n    // useEffect(() => {\r\n    //     fetch(\"http://localhost:8000/api/Stops/\")\r\n    //     .then(response => response.json())\r\n    //         // 4. Setting *dogImage* to the image url that we received from the response above\r\n    //     .then(data => setmarkers(data.message))\r\n    //   },[])\r\n\r\n\r\n      \r\n    //   const getData=()=>{\r\n    //     fetch('http://localhost:8000/api/Stops/'\r\n    //     ,{\r\n    //       headers : { \r\n    //         'Content-Type': 'http://localhost:8000/api/Stops/',\r\n    //         'Accept': 'http://localhost:8000/api/Stops/'\r\n    //        }\r\n    //     }\r\n    //     )\r\n    //       .then(function(response){\r\n    //         console.log(response)\r\n    //         return response.json();\r\n    //       })\r\n    //       .then(function(myJson) {\r\n    //         console.log(myJson);\r\n    //         setData(myJson)\r\n    //       });\r\n    //   }\r\n   \r\n      \r\n    //   useEffect(()=>{\r\n    //     getData()\r\n    //   },[])\r\n\r\n\r\n    const [directionsResponse, setDirectionsResponse] = useState(null)\r\n   \r\n    /**@type React.MutableRefObject<HTMLInputElement> */\r\n    const startRef = useRef()\r\n    /**@type React.MutableRefObject<HTMLInputElement> */\r\n    const destinationRef = useRef()\r\n    const [map, setMap] = useState(/** @type google.maps.Map */ (null))\r\n    const { isLoaded } = useJsApiLoader({\r\n    googleMapsApiKey: \"AIzaSyCdf-x6SluXsWzP9qpwxVGBY08pm_3TAQU\",\r\n    libraries:['places']\r\n  })\r\n      if(!isLoaded) {\r\n        return \"map is not loaded\";\r\n    }\r\n\r\n    async function caculateRoute(){\r\n        if(startRef.current.value === '' || destinationRef.current.value === '') {\r\n            return;\r\n        }\r\n        // eslint-disable-next-line\r\n        const directionsService = new google.maps.DirectionsService()\r\n        // eslint-disable-next-line\r\n        const results = await directionsService.route({\r\n            origin: startRef.current.value,\r\n            destination: destinationRef.current.value,\r\n            // eslint-disable-next-line\r\n            travelMode: google.maps.TravelMode.TRANSIT\r\n        })\r\n        setDirectionsResponse(results)\r\n        console.log(results)\r\n    }\r\n\r\n   function clearRoute() {\r\n    if(startRef.current.value === '' || destinationRef.current.value === '') {\r\n        setDirectionsResponse(null);\r\n    }\r\n   }\r\n\r\n\r\n\r\n\r\n\r\n\r\n   let markers = [ // Just an example this should probably be in your state or props. \r\n   {\r\n     name: \"marker1\",\r\n     position: { lat: 53.17655, lng: -6.138564 }\r\n   },\r\n   {\r\n     name: \"marker2\",\r\n     position: { lat: 53.16659, lng: -6.113569 }\r\n   },\r\n   {\r\n     name: \"marker3\",\r\n     position: { lat: 49.15659, lng: -123.143569 }\r\n   }\r\n ];\r\n\r\n\r\n\r\n    return  (\r\n    <><div className='weather-card'><WeatherCard /></div>\r\n    <div className=\"flex-container\">\r\n        <div className=\"box1\">\r\n            <h1>Journey Planner</h1>\r\n            <div className=\"journey-form\">\r\n                <Autocomplete>\r\n                <input type=\"search\" placeholder=\"Start Point\" className=\"box\" ref={startRef}></input>\r\n                </Autocomplete>\r\n                <Autocomplete>\r\n                <input type=\"search\" placeholder=\"Destination\" className=\"box\" ref={destinationRef}></input>\r\n                </Autocomplete>\r\n                <label for=\"time\">Choose a time to start the journey: </label>\r\n                <select id=\"option\" onChange={() => {\r\n                    var option = document.getElementById(\"option\").value;\r\n                    if (option !== \"now\") {\r\n                        \r\n                        document.getElementById(\"time\").innerHTML = '<input type=\"date\" name=\"\" class=\"date\">' + '<input type=\"time\" name=\"\" class=\"time\">';\r\n                    } else {\r\n                        document.getElementById(\"time\").innerHTML = \"\";\r\n                    }\r\n                } }>\r\n                    <option value=\"now\">Leave Now</option>\r\n                    <option value=\"depart\">Depart At</option>\r\n                    <option value=\"arrive\">Arrive By</option>\r\n                    <option value=\"lastAvaliable\">Last Avaliable</option>\r\n                </select>\r\n\r\n                <div id=\"time\"></div>\r\n                <button type=\"submit\"  className=\"btn\" onClick={caculateRoute}>Search</button>\r\n            </div>\r\n            <div id=\"result\"></div>\r\n        </div>\r\n        <div className=\"box2\">\r\n            <div id=\"map\">\r\n            \r\n                <GoogleMap\r\n                    mapContainerStyle={containerStyle}\r\n                    center={center}\r\n                    zoom={13}\r\n                    onLoad={map => setMap(map)}\r\n                    >\r\n                    { /* Child components, such as markers, info windows, etc. */ }\r\n                   \r\n                    {\r\n                    markers.map((markers, index) => (\r\n                     <Marker\r\n                    key={index}\r\n                    name={markers.name}\r\n                    position={{ lat:markers.latitude, lng:markers.longitude  }}\r\n                     />\r\n                     ))}\r\n                    {directionsResponse && (<DirectionsRenderer directions={directionsResponse} />)}\r\n                 </GoogleMap>\r\n            </div>\r\n        </div>\r\n        \r\n    </div></>);}\r\nexport default JourneyPlanning;"],"mappings":"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"},"metadata":{},"sourceType":"module"}